Основной стандарт написания кода
================================

Этот раздел включает в себя стандарты написания кода, которые необходимо
соблюдать для обеспечения высокого уровня его функциональной совместимости
со сторонним кодом.

Ключевые слова "НЕОБХОДИМО", "НЕДОПУСТИМО", "ТРЕБУЕТСЯ", "НУЖНО",
"НЕ ПОЗВОЛЯЕТСЯ", "СЛЕДУЕТ", "НЕ СЛЕДУЕТ", "РЕКОМЕНДУЕТСЯ", "ВОЗМОЖНО",
и "НЕОБЯЗАТЕЛЬНЫЙ" в этом документе СЛЕДУЕТ интерпретировать в соответствии
с [RFC 2119].

[RFC 2119]: http://rfc2.ru/2119.rfc/print
[PSR-0]: https://github.com/php-fig/fig-standards/blob/master/accepted/ru/PSR-0.md
[PSR-4]: https://github.com/php-fig/fig-standards/blob/master/accepted/ru/PSR-4-autoloader.md


1. Обзор
--------

- В файлах в качестве открывающих тегов НЕОБХОДИМО использовать только `<?php` and `<?=`.

- В файлах НЕОБХОДИМО использовать только кодировку UTF-8 без BOM для PHP кода.

- В файлах СЛЕДУЕТ *либо* объявлять классы, функции, константы и т.д.
  *либо* выполнять побочные действия (например генерировать вывод, менять настройки .ini и т.д.),
  но НЕ СЛЕДУЕТ делать и то, и другое.

- Автозагрузку пространств имен и классов НЕОБХОДИМО осуществлять согласно PSR: [[PSR-0], [PSR-4]].

- Имена классов НЕОБХОДИМО объявлять в `StudlyCaps`.

- Константы классов НЕОБХОДИМО объявлять со всеми символами в верхнем регистре и символами подчеркивания.

- Названия методов НЕОБХОДИМО объявлять в `camelCase`.


2. Файлы
--------

### 2.1. Теги PHP

В PHP коде НЕОБХОДИМО использовать длиные теги `<?php ?>` или короткие echo-теги `<?= ?>`;
НЕДОПУСТИМО использовать любые другие варианты.

### 2.2. Кодировка символов

В PHP коде НЕОБХОДИМО использовать только кодировку UTF-8 без BOM.

### 2.3. Побочные действия

В файлах СЛЕДУЕТ объявлять классы, функции, константы и т.д. и не выполнять
побочных действий, или же СЛЕДУЕТ вызывать только побочные действия.
НЕ СЛЕДУЕТ делать и то, и другое.

Фраза «побочные действия» означает выполнение логики, которая не относится напрямую
к объявлению классов, функций, констант и т.д., *простым подключением файла*.

«Побочные действия» включают, но не ограничиваются: генерацию вывода, явное
использование `require` or `include`, подключение к внешним сервисами, модификация
настроек ini, вывод ошибок или исключений, изменение глобальных или статичных переменных,
чтение или запись в файл, и т.д.

Ниже представлен пример файла вместе с объявлением и побочными действиями; этот код
является примером того, чего следует избегать (код является неправильным):

```php
<?php
// побочные действия: изменение настроек ini
ini_set('error_reporting', E_ALL);

// побочные действия: загрузка файла
include "file.php";

// побочные действия: генерация вывода
echo "<html>\n";

// объявление функции
function foo()
{
    // тело функции
}
```

Следующий пример файла содержит объявление без побочных действий; этот код является
правильным:

```php
<?php
// объявление функции
function foo()
{
    // тело функции
}

// условное объявление *не является* побочным действием
if (! function_exists('bar')) {
    function bar()
    {
        // тело функции
    }
}
```


3. Пространства имен и названия классов
---------------------------------------

Пространства имен и классы НЕОБХОДИМО создавать согласно стандарту [PSR-0].

Это означает, что каждый класс — это файл, не больше, не меньше, и в пространстве имен,
как минимум, один уровень: верхний уровень «наименование производителя».

Имена классов НЕОБХОДИМО объявлять в `StudlyCaps`.

В коде, написанном для PHP 5.3 и выше, НЕОБХОДИМО использовать формальные пространства имен.

Например:

```php
<?php
// PHP 5.3 и выше:
namespace Vendor\Model;

class Foo
{
}
```

В коде, написанном для PHP 5.2.x и ниже СЛЕДУЕТ использовать соглашение псевдо-пространств
имен с префиксом `Vendor_` для имени класса.

```php
<?php
// PHP 5.2.x и ниже:
class Vendor_Model_Foo
{
}
```

4. Константы классов, свойства, и методы
-------------------------------------------

Термин «класс» относится ко всем классам, интерфейсам и трейтам.

### 4.1. Константы

Константы классов НЕОБХОДИМО объявлять символами в верхнем регистре и символами нижнего
подчеркивания для разделения слов.

Например:

```php
<?php
namespace Vendor\Model;

class Foo
{
    const VERSION = '1.0';
    const DATE_APPROVED = '2012-06-01';
}
```

### 4.2. Свойства

Это руководство намеренно избегает рекомендаций относительно использования
`$StudlyCaps`, `$camelCase` или `$under_score` в названиях свойств.

Как бы то ни было, используемый стандарт именования СЛЕДУЕТ применять последовательно
в разумных пределах. Этот предел может быть установлен на уровне производителя, пакета,
класса, или метода.

### 4.3. Методы

Названия методов ДОЛЖНЫ быть объявлены в `camelCase()`.
